# RocketMQ

新坑开始，看了部分源码，感觉还行，开始完整记录一下。:dog:

**源码版本**

```shell
git log
commit 39bb9386f10d5d8dfe81183c172a3a86f6d313bd (HEAD -> master, tag: rocketmq-all-4.8.0, origin/release-4.8.0, origin/master, origi
n/HEAD)
```



## 模块说明

## namesrv

在`RocketMQ`中`broker`相当于服务端，而`Producer、Consumer`都相当于其客户端。

如果broker永远不变，那么`namesrv`存在就没有任何意义，**但是**由于服务端自动伸缩、故障以及升级等，服务端会变动，因此需要一个注册中心。

`namesrv`这样的注册中心一般存在两种机制：**客户端发现机制**和**服务端发现机制。**

##### 客户端发现机制

>  对于消费者和生产者客户端而言。

当发出请求服务时，`客户端通过注册中心服务知道所有的服务实例`。

`客户端`**接着使用负载均衡算法选择可用的服务实例中的一个并进行发送**。

##### 服务端发现机制

发出请求服务时,客户端通过请求负载平衡器，`负载均衡器通过注册中心服务知道所有的服务实例`。

`负载均衡器`**接着使用负载均衡算法选择可用的服务实例中的一个并进行发送**。。
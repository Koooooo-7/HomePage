#   分布式事务

随着分布式系统越来越多的应用，分布式系统的分布式事务成为了一个亟待解决的问题。

## 什么是分布式事务

我们都知道对于数据库事务的基本概念(ACID)，而分布式事务简单来说，就是针对一次业务操作，涉及到对不同的服务模块的调用（不同服务器上的数据库的写入），需要保证这对整个业务操作要么同时成功要么同时失败。

## MQ实现分布式事务

> 使用MQ实现分布式事务，实现最终一致性。



### 前提

- 可靠生产：保证消息一定发送到MQ。
- 可靠消费：保证消息取出来一定正确消费掉。

如何解决上面两个问题呢。

**可靠生产**可以通过MQ接收消息后的回调确认来更改存储在数据库中**发送记录表**对应发送的状态位置。

**可靠消费**可以通过手动确认ACK的方式来决定MQ如何处理这条消息（异常重试/异常放弃/成功删除），失败的重试次数，后续告警或者放入私信队列，根据不同需求处理。

